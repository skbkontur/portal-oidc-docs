Сценарии использования
=====================================

В этой статье мы собрали основные сценарии, которые помогут вам понять, что вы можете получить от интеграции с OpenID Connect:

* `Аутентификация в приложении`_
* `Авторизация в продукты Контура`_
* `Аутентификация в приложении и авторизация в продукты Контура`_
* `Аутентификация и авторизация в продуктах Контура`_

Если вы хотите интегрироваться с Контур.ID по OpenID Connect, но вам по какой-то причине не подходят типовые сценарии, напишите нам на portal.team@skbkontur.ru для консультации.

Аутентификация в приложении
---------------------------

Схема позволяет приложению узнать у OpenID Провайдера информацию о пользователе. Пользователь будет входить в ваше приложение, а для аутентификации использовать свою учетную запись Контура. Если пользователь новый, то он пройдет регистрацию. 

Приложение от OpenID Провайдера получит основные данные о пользователе. Дальнейшее разграничение прав доступа в приложении вы будете настраивать самостоятельно.

.. image:: /_static/auth_script.png
    :width: 650 px

Для пользователя весь процесс аутентификации будет выглядеть как несколько редиректов в браузере:

1. Приложение перенаправляет пользователя в OpenID Провайдер. 
2. Пользователь входит в свою учетную запись Контура либо регистрирует новую.
3. Когда OpenID Провайдер узнает пользователя, он перенаправит его обратно в приложение.

Авторизация в продукты Контура
------------------------------
При помощи OpenID Провайдера пользователь разрешает вашему приложению получать свои секретные данные из продукта Контура. При этом ваше приложение ничего не будет знать про учетную запись пользователя (логин, пароль, данные пользователя). 

Результат авторизации — ключ(токен) доступа, по которому приложение сможет отправить запрос в API продуктов Контура.

.. image:: /_static/authorize_script.png
    :width: 700 px

Аутентификация в приложении и авторизация в продукты Контура
------------------------------------------------------------

Данная схема позволяет приложению узнать у OpenID Провайдера информацию о пользователе, а также отправлять от его имени запрос в API продуктов Контура.

.. image:: /_static/auth_authorize_script.png
    :width: 700 px

Аутентификация и авторизация в продуктах Контура
------------------------------------------------
Взаимодействовать с продуктами Контура можно без участия конечного пользователя. Данная схема описывает **взаимодействие между сервисами**. 
С помощью OpenID Провайдера приложение может аутентифицироваться и авторизоваться, чтобы запрашивать и получать данные из API продуктов Контура. 

.. image:: /_static/client_credentials.png
    :width: 600 px

.. seealso:: На странице :doc:`/schemes/index` описано взаимодействие приложения с OpenID Провайдером и последовательность интеграции.