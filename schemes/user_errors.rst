
Пользовательские ошибки
=======================

Есть ошибки, которые пользователь увидит в браузере, но ваше приложение их не получит. 

Пример пользовательской ошибки
------------------------------

.. image:: /_static/user_error.jpg
   :width: 600

Возможные ошибки и их описание
------------------------------

invalid_request
~~~~~~~~~~~~~~~

**Значение:**

* запрос составлен неверно.

**error_description (комментарий или причина ошибки):**

* Invalid client_id — client_id отсутствует или превышает 300 символов;
* Invalid redirect_uri:

    * redirect_uri отсутствует,
    * redirect_uri превышает 400 символов,
    * redirect_uri не является корректным URL;

* Invalid scope:

    * scope отсутствуют в запросе,
    * строка со всеми scope превышает 300 символов;

* Missing openid scope — приложение запросило id_token (в response_type есть id токен), но при этом не указало scope openid;
* Invalid nonce:

    * параметр nonce не передан (nonce обязателен, если есть scope openid),
    * параметр nonce превышает 300 символов.


unauthorized_client
~~~~~~~~~~~~~~~~~~~

**Значение:**

* клиент не существует;
* для указанного client_id запрещена текущая схема интеграции (получение токена через код подтверждения, получение токена из url).

**error_description (комментарий или причина ошибки):**

* Invalid redirect_uri — redirect_url не прошел валидацию, он не был указан при регистрации приложения;
* Invalid scope — для указанного client_id запрещен один или несколько из запрошенных scope. Разрешение на scope выдается при регистрации приложения.
        
    Если вам нужен конкретный scope, напишите нам  на portal.team@skbkontur.ru и опишите ваш сценарий.

unsupported_response_type
~~~~~~~~~~~~~~~~~~~~~~~~~

**Значение:**

* в запросе отсутствует response_type,
* передан неизвестный response_type. 

invalid_scope
~~~~~~~~~~~~~

**Значение:**

* в запросе переданы несуществующие scope,
* в запросе переданы scope для аутентификации, например, phone или email, но при этом не запрошен главный scope openid.